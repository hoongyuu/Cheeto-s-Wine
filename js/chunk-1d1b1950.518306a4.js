(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d1b1950"],{"13d5":function(t,a,e){"use strict";var r=e("23e7"),o=e("d58f").left,s=e("a640"),i=e("ae40"),n=s("reduce"),c=i("reduce",{1:0});r({target:"Array",proto:!0,forced:!n||!c},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"90f5":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("loading",{attrs:{loader:"dots",active:t.isLoading,"background-color":"rgb(173, 92, 0)"},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"cart-form-wrap"},[e("div",{staticClass:"cart-form"},[e("div",{staticClass:"cart-form-header"},[e("h2",[t._v("訂購人資料")]),e("router-link",{attrs:{to:"/cart"}},[e("i",{staticClass:"fas fa-angle-left"}),t._v(" 購物車 ")])],1),e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(a){var r=a.invalid;return[e("form",{on:{submit:function(a){return a.preventDefault(),t.formSubmit(a)}}},[e("div",{staticClass:"cart-form-split"},[e("div",{staticClass:"item"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.classes;return[e("label",{attrs:{for:"cartName"}},[t._v("姓名 *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],class:r,attrs:{type:"text",placeholder:"請輸入姓名",id:"cartName",name:"姓名"},domProps:{value:t.formData.name},on:{input:function(a){a.target.composing||t.$set(t.formData,"name",a.target.value)}}})]}}],null,!0)})],1),e("div",{staticClass:"cart-form-radio"},[e("label",{attrs:{for:"cartMale"}},[t._v("先生")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sex,expression:"formData.sex"}],attrs:{type:"radio",name:"sex",value:"male",id:"cartMale",required:""},domProps:{checked:t._q(t.formData.sex,"male")},on:{change:function(a){return t.$set(t.formData,"sex","male")}}}),e("label",{attrs:{for:"cartFemale"}},[t._v("小姐")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sex,expression:"formData.sex"}],attrs:{type:"radio",name:"sex",value:"female",id:"cartFemale",required:""},domProps:{checked:t._q(t.formData.sex,"female")},on:{change:function(a){return t.$set(t.formData,"sex","female")}}})])]),e("div",{staticClass:"cart-form-split"},[e("div",{staticClass:"item"},[e("ValidationProvider",{attrs:{rules:"required|min8"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors,o=a.classes,s=a.passed;return[e("label",{attrs:{for:"cartPhone"}},[t._v("聯絡手機 *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.tel,expression:"formData.tel"}],class:o,attrs:{type:"tel",placeholder:"請輸入手機號碼",id:"cartPhone",name:"聯絡電話"},domProps:{value:t.formData.tel},on:{input:function(a){a.target.composing||t.$set(t.formData,"tel",a.target.value)}}}),!1===s?e("span",{staticClass:"invalid"},[t._v(" "+t._s(r[0])+" ")]):t._e()]}}],null,!0)})],1),e("div",{staticClass:"item"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.classes;return[e("label",{attrs:{for:"cartBirth"}},[t._v("生日 *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.birthday,expression:"formData.birthday"}],class:r,attrs:{type:"date",id:"cartBirth"},domProps:{value:t.formData.birthday},on:{input:function(a){a.target.composing||t.$set(t.formData,"birthday",a.target.value)}}})]}}],null,!0)})],1)]),e("div",{staticClass:"cart-form-whole"},[e("div",{staticClass:"item"},[e("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors,o=a.passed,s=a.classes;return[e("label",{attrs:{for:"cartEmail"}},[t._v("Email *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],class:s,attrs:{type:"email",id:"cartEmail",name:"Email",placeholder:"請輸入電子郵件"},domProps:{value:t.formData.email},on:{input:function(a){a.target.composing||t.$set(t.formData,"email",a.target.value)}}}),!1===o?e("span",{staticClass:"invalid"},[t._v(" "+t._s(r[0])+" ")]):t._e()]}}],null,!0)})],1)]),e("div",{staticClass:"cart-form-whole"},[e("div",{staticClass:"item"},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors,o=a.classes,s=a.passed;return[e("label",{attrs:{for:"cartAddress"}},[t._v("地址 *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],class:o,attrs:{type:"text",id:"cartAddress",name:"地址",placeholder:"請輸入地址"},domProps:{value:t.formData.address},on:{input:function(a){a.target.composing||t.$set(t.formData,"address",a.target.value)}}}),!1===s?e("span",{staticClass:"invalid"},[t._v(" "+t._s(r[0])+" ")]):t._e()]}}],null,!0)})],1)]),e("div",{staticClass:"cart-form-whole"},[e("div",{staticClass:"item"},[e("label",{attrs:{for:"cartPurchase"}},[t._v("購買方式 *")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.payment,expression:"formData.payment"}],attrs:{id:"cartPurchase",required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.formData,"payment",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:""}},[t._v("請選擇付款方式")]),e("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),e("option",{attrs:{value:"ATM"}},[t._v("ATM")]),e("option",{attrs:{value:"Credit"}},[t._v("Credit")]),e("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")]),e("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")])])])]),e("div",{staticClass:"cart-form-whole"},[e("div",{staticClass:"item"},[e("label",{attrs:{for:"cartMessage"}},[t._v("備註")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.message,expression:"formData.message"}],attrs:{id:"cartMessage",rows:"3",placeholder:"歡迎留下備註"},domProps:{value:t.formData.message},on:{input:function(a){a.target.composing||t.$set(t.formData,"message",a.target.value)}}})]),e("div",{staticClass:"cart-form-btn"},[e("button",{staticClass:"btn",class:{disabled:r},attrs:{type:"submit"}},[t._v(" 確認付款 ")])])])])]}}])})],1),e("div",{staticClass:"cart-info"},[e("p",{staticClass:"cart-info-tips"},[t._v(" 訂單確認完成後，5~7個工作天內宅配到貨或是通知指定門市取貨。 ")]),e("div",{staticClass:"cart-info-total"},[e("ul",[e("li",[e("h3",[t._v("商品總額")]),e("span",[t._v("$ "+t._s(t._f("currency")(t.totalMoney)))])]),e("li",[e("h3",[t._v("折扣碼")]),e("div",{staticClass:"cart-info-coupon"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],attrs:{type:"text"},domProps:{value:t.couponCode},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.getCoupon(a)},input:function(a){a.target.composing||(t.couponCode=a.target.value)}}}),e("button",{attrs:{type:"button"},on:{click:t.getCoupon}},[t._v("確認")])])]),e("li",[e("h3",[t._v("折價")]),t.coupon.percent?e("span",[t._v(" -$ "+t._s(t._f("currency")(Math.floor(t.totalMoney*(t.coupon.percent/100))))+" ")]):e("span",[t._v("-$ 0")])]),e("li",[e("h3",[t._v("總計")]),t.coupon.percent?e("span",[t._v(" $ "+t._s(t._f("currency")(Math.floor(t.totalMoney-t.totalMoney*(t.coupon.percent/100))))+" ")]):e("span",[t._v("$ "+t._s(t._f("currency")(t.totalMoney)))])])])]),e("div",{staticClass:"cart-info-products"},[e("h3",[t._v("購買商品")]),t._l(t.cartData,(function(a){return e("div",{key:a.product.id,staticClass:"cart-info-item"},[e("div",{staticClass:"info"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:a.product.imageUrl}})]),e("div",{staticClass:"txt"},[e("h5",[t._v(t._s(a.productData.options.winery))]),e("h4",[t._v(t._s(a.productData.title))]),e("span",[t._v(" "+t._s(a.productData.options.year)+" | "+t._s(a.productData.options.capacity)+" | "+t._s(a.productData.category)+" ")])])]),e("div",{staticClass:"quantity"},[e("span",[t._v("x "+t._s(a.quantity))]),e("span",[t._v("$ "+t._s(t._f("currency")(a.quantity*a.product.price)))])])])}))],2)])])],1)},o=[],s=(e("99af"),e("13d5"),e("5530")),i=e("2f62"),n={data:function(){return{couponCode:"",coupon:{},formData:{name:"",sex:"",tel:"",birthday:"",email:"",address:"",payment:"",message:""}}},created:function(){this.getCartData()},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])(["getCartData"])),{},{getCoupon:function(){var t=this;this.$store.state.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("6b69171f-d486-488a-beaf-ee85eb21fa24","/ec/coupon/search"),e={code:this.couponCode};this.axios.post(a,e).then((function(a){t.coupon=a.data.data,t.$store.state.isLoading=!1,t.$swal.fire({position:"top-end",icon:"success",title:"恭喜成功拿到折扣",showConfirmButton:!1,timer:1500})})).catch((function(){t.$store.state.isLoading=!1,t.$swal.fire({position:"top-end",icon:"error",title:"沒有這個折扣碼唷！",showConfirmButton:!1,timer:1500})}))},formSubmit:function(){var t=this;this.$store.state.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("6b69171f-d486-488a-beaf-ee85eb21fa24","/ec/orders"),e=Object(s["a"])({},this.formData);this.coupon.enabled&&(e.coupon=this.coupon.code),this.axios.post(a,e).then((function(a){t.$router.push({path:"/cart-complete",query:{orderId:a.data.data.id}}),t.$store.state.isLoading=!1})).catch((function(){t.$swal.fire({position:"top-end",icon:"error",title:"建立訂單失敗",showConfirmButton:!1,timer:1500}),t.$store.state.isLoading=!1}))}}),computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])(["cartData","isLoading"])),{},{totalMoney:function(){var t=this.cartData.reduce((function(t,a){return t+a.product.price*a.quantity}),0);return t}})},c=n,l=e("2877"),d=Object(l["a"])(c,r,o,!1,null,null,null);a["default"]=d.exports},d58f:function(t,a,e){var r=e("1c0b"),o=e("7b0b"),s=e("44ad"),i=e("50c4"),n=function(t){return function(a,e,n,c){r(e);var l=o(a),d=s(l),u=i(l.length),m=t?u-1:0,p=t?-1:1;if(n<2)while(1){if(m in d){c=d[m],m+=p;break}if(m+=p,t?m<0:u<=m)throw TypeError("Reduce of empty array with no initial value")}for(;t?m>=0:u>m;m+=p)m in d&&(c=e(c,d[m],m,l));return c}};t.exports={left:n(!1),right:n(!0)}}}]);
//# sourceMappingURL=chunk-1d1b1950.518306a4.js.map